<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - Mentora</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: linear-gradient(135deg, #2c5f4f, #1a4838);
            color: white;
            padding: 2rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            padding: 0 2rem 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }

        .logo h2 {
            font-size: 1.5rem;
            color: #d4af37;
        }

        .nav-menu {
            list-style: none;
            padding: 2rem 0;
        }

        .nav-item {
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s;
        }

        .nav-item:hover, .nav-item.active {
            background: rgba(212, 175, 55, 0.2);
            color: white;
            border-left: 4px solid #d4af37;
        }

        .nav-item i {
            font-size: 1.2rem;
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            flex: 1;
            padding: 2rem;
        }

        .topbar {
            background: white;
            padding: 1.5rem 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topbar h1 {
            font-size: 1.8rem;
            color: #2c5f4f;
        }

        .topbar-actions {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #d4af37, #b8962f);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.users { background: linear-gradient(135deg, #3498db, #2980b9); }
        .stat-icon.tests { background: linear-gradient(135deg, #27ae60, #229954); }
        .stat-icon.revenue { background: linear-gradient(135deg, #d4af37, #b8962f); }
        .stat-icon.pending { background: linear-gradient(135deg, #e74c3c, #c0392b); }

        .stat-info h3 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .stat-info p {
            font-size: 2rem;
            font-weight: 700;
            color: #2c5f4f;
        }

        /* ì£¼ê°„ í†µê³„ ì„¹ì…˜ */
        .weekly-stats {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }

        .weekly-stats h3 {
            color: #2c5f4f;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stats-table {
            width: 100%;
            border-collapse: collapse;
        }

        .stats-table th {
            text-align: left;
            padding: 1rem;
            border-bottom: 2px solid #e0e0e0;
            color: #666;
            font-weight: 600;
        }

        .stats-table td {
            padding: 1rem;
            border-bottom: 1px solid #f0f0f0;
        }

        .stats-table tr:hover {
            background: #f8f9fa;
        }

        .trend-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .trend-up {
            background: #d4edda;
            color: #155724;
        }

        .trend-down {
            background: #f8d7da;
            color: #721c24;
        }

        /* ì¸ê¸° ê²€ì‚¬ TOP 5 */
        .popular-tests {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }

        .popular-tests h3 {
            color: #2c5f4f;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .test-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .test-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .test-rank {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            color: white;
        }

        .rank-1 { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .rank-2 { background: linear-gradient(135deg, #C0C0C0, #A8A8A8); }
        .rank-3 { background: linear-gradient(135deg, #CD7F32, #B8732D); }
        .rank-4, .rank-5 { background: linear-gradient(135deg, #667eea, #764ba2); }

        .test-name {
            flex: 1;
            margin-left: 1rem;
            font-weight: 600;
            color: #333;
        }

        .test-count {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2c5f4f;
        }

        .test-bar {
            width: 150px;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-left: 1rem;
            overflow: hidden;
        }

        .test-bar-fill {
            height: 100%;
            background: linear-gradient(135deg, #d4af37, #b8962f);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Activities */
        .activities {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }

        .activities h3 {
            color: #2c5f4f;
            margin-bottom: 1.5rem;
        }

        .activity-item {
            padding: 1rem;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-item:hover {
            background: #f8f9fa;
            border-radius: 8px;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f5f7fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2c5f4f;
        }

        .activity-info {
            flex: 1;
        }

        .activity-text {
            color: #333;
            margin-bottom: 0.25rem;
        }

        .activity-time {
            font-size: 0.85rem;
            color: #999;
        }

        /* ê°€ì´ë“œë¶ ì„¹ì…˜ */
        .guidebook-section {
            margin: 2rem 0;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(212,175,55,0.03), rgba(240,217,140,0.03));
            border-radius: 16px;
            border: 2px dashed #d4af37;
        }

        .section-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .guidebook-orders table {
            border-radius: 8px;
            overflow: hidden;
        }

        .guidebook-orders table thead {
            background: linear-gradient(135deg, #2c5f4f, #1a4838);
            color: white;
        }

        .guidebook-orders table tbody tr:hover {
            background: rgba(212, 175, 55, 0.05);
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 0;
                position: fixed;
                z-index: 1000;
            }

            .main-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .test-bar {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2><i class="fas fa-brain"></i> Mentora Admin</h2>
            </div>
            <nav class="nav-menu">
                <a href="index.html" class="nav-item active">
                    <i class="fas fa-chart-line"></i>
                    <span>ëŒ€ì‹œë³´ë“œ</span>
                </a>
                <a href="users.html" class="nav-item">
                    <i class="fas fa-users"></i>
                    <span>ì‚¬ìš©ì ê´€ë¦¬</span>
                </a>
                <a href="tests.html" class="nav-item">
                    <i class="fas fa-clipboard-list"></i>
                    <span>ê²€ì‚¬ ê´€ë¦¬</span>
                </a>
                <a href="#guidebook" class="nav-item" onclick="scrollToGuidebook(); return false;">
                    <i class="fas fa-book"></i>
                    <span>ê°€ì´ë“œë¶ íŒë§¤</span>
                </a>
                <a href="refunds.html" class="nav-item">
                    <i class="fas fa-undo"></i>
                    <span>í™˜ë¶ˆ ê´€ë¦¬</span>
                </a>
                <a href="https://mentora.co.kr/index.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>ì‚¬ì´íŠ¸ë¡œ ì´ë™</span>
                </a>
                <a href="#" class="nav-item" onclick="logout(); return false;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>ë¡œê·¸ì•„ì›ƒ</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="topbar">
                <div>
                    <h1>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                    <p style="color: #666; margin-top: 0.5rem;">Mentora í”Œë«í¼ ì „ì²´ í˜„í™©</p>
                </div>
                <div class="topbar-actions">
                    <button class="btn btn-primary" onclick="location.reload()">
                        <i class="fas fa-sync-alt"></i> ìƒˆë¡œê³ ì¹¨
                    </button>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon users">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3>ì „ì²´ ì‚¬ìš©ì</h3>
                        <p>1,250</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon tests">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <div class="stat-info">
                        <h3>ì™„ë£Œëœ ê²€ì‚¬</h3>
                        <p>8,542</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon revenue">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-info">
                        <h3>ì´ ë§¤ì¶œ</h3>
                        <p>â‚©2.5M</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon pending">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3>í™˜ë¶ˆ ëŒ€ê¸°</h3>
                        <p>12</p>
                    </div>
                </div>
            </div>

            <!-- ì£¼ê°„ í†µê³„ -->
            <div class="weekly-stats">
                <h3><i class="fas fa-calendar-week"></i> ê²€ì‚¬ ì™„ë£Œ ì¶”ì´ (ìµœê·¼ 7ì¼)</h3>
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>ìš”ì¼</th>
                            <th>ì™„ë£Œëœ ê²€ì‚¬</th>
                            <th>ì „ì¼ ëŒ€ë¹„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ì›”ìš”ì¼</strong></td>
                            <td style="font-size: 1.2rem; font-weight: 700; color: #2c5f4f;">120ê±´</td>
                            <td><span class="trend-badge trend-up"><i class="fas fa-arrow-up"></i> +5%</span></td>
                        </tr>
                        <tr>
                            <td><strong>í™”ìš”ì¼</strong></td>
                            <td style="font-size: 1.2rem; font-weight: 700; color: #2c5f4f;">150ê±´</td>
                            <td><span class="trend-badge trend-up"><i class="fas fa-arrow-up"></i> +25%</span></td>
                        </tr>
                        <tr>
                            <td><strong>ìˆ˜ìš”ì¼</strong></td>
                            <td style="font-size: 1.2rem; font-weight: 700; color: #2c5f4f;">180ê±´</td>
                            <td><span class="trend-badge trend-up"><i class="fas fa-arrow-up"></i> +20%</span></td>
                        </tr>
                        <tr>
                            <td><strong>ëª©ìš”ì¼</strong></td>
                            <td style="font-size: 1.2rem; font-weight: 700; color: #2c5f4f;">170ê±´</td>
                            <td><span class="trend-badge trend-down"><i class="fas fa-arrow-down"></i> -5.5%</span></td>
                        </tr>
                        <tr>
                            <td><strong>ê¸ˆìš”ì¼</strong></td>
                            <td style="font-size: 1.2rem; font-weight: 700; color: #2c5f4f;">190ê±´</td>
                            <td><span class="trend-badge trend-up"><i class="fas fa-arrow-up"></i> +11.7%</span></td>
                        </tr>
                        <tr>
                            <td><strong>í† ìš”ì¼</strong></td>
                            <td style="font-size: 1.2rem; font-weight: 700; color: #2c5f4f;">210ê±´</td>
                            <td><span class="trend-badge trend-up"><i class="fas fa-arrow-up"></i> +10.5%</span></td>
                        </tr>
                        <tr>
                            <td><strong>ì¼ìš”ì¼</strong></td>
                            <td style="font-size: 1.2rem; font-weight: 700; color: #2c5f4f;">230ê±´</td>
                            <td><span class="trend-badge trend-up"><i class="fas fa-arrow-up"></i> +9.5%</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- ì¸ê¸° ê²€ì‚¬ TOP 5 -->
            <div class="popular-tests">
                <h3><i class="fas fa-trophy"></i> ì¸ê¸° ê²€ì‚¬ TOP 5</h3>
                
                <div class="test-item">
                    <div class="test-rank rank-1">1</div>
                    <div class="test-name">MBTI ì„±ê²© ìœ í˜• ê²€ì‚¬</div>
                    <div class="test-count">2,500ê±´</div>
                    <div class="test-bar">
                        <div class="test-bar-fill" style="width: 100%;"></div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-rank rank-2">2</div>
                    <div class="test-name">ì—ë‹ˆì–´ê·¸ë¨ ê²€ì‚¬</div>
                    <div class="test-count">1,800ê±´</div>
                    <div class="test-bar">
                        <div class="test-bar-fill" style="width: 72%;"></div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-rank rank-3">3</div>
                    <div class="test-name">Big Five ì„±ê²© ê²€ì‚¬</div>
                    <div class="test-count">1,500ê±´</div>
                    <div class="test-bar">
                        <div class="test-bar-fill" style="width: 60%;"></div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-rank rank-4">4</div>
                    <div class="test-name">DISC í–‰ë™ ìœ í˜• ê²€ì‚¬</div>
                    <div class="test-count">1,200ê±´</div>
                    <div class="test-bar">
                        <div class="test-bar-fill" style="width: 48%;"></div>
                    </div>
                </div>

                <div class="test-item">
                    <div class="test-rank rank-5">5</div>
                    <div class="test-name">Holland ì§ì—… ì ì„± ê²€ì‚¬</div>
                    <div class="test-count">1,000ê±´</div>
                    <div class="test-bar">
                        <div class="test-bar-fill" style="width: 40%;"></div>
                    </div>
                </div>
            </div>

            <!-- ê°€ì´ë“œë¶ íŒë§¤ í†µê³„ -->
            <div class="guidebook-section">
                <div class="section-header">
                    <h2 style="color: #2c5f4f; margin-bottom: 0.5rem;">
                        <i class="fas fa-book"></i> ê°€ì´ë“œë¶ íŒë§¤ í˜„í™©
                    </h2>
                    <p style="color: #666;">ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ê¸°ë°˜ ì‹¤ì‹œê°„ íŒë§¤ ë°ì´í„°</p>
                </div>

                <!-- ê°€ì´ë“œë¶ íŒë§¤ í†µê³„ ì¹´ë“œ -->
                <div class="stats-grid" style="margin-top: 1.5rem;">
                    <div class="stat-card" style="background: linear-gradient(135deg, rgba(212,175,55,0.1), rgba(240,217,140,0.1)); border-left: 4px solid #d4af37;">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #d4af37, #b8962f);">
                            <i class="fas fa-shopping-cart" style="color: white; font-size: 1.5rem;"></i>
                        </div>
                        <div class="stat-info">
                            <h3>ê°€ì´ë“œë¶ íŒë§¤</h3>
                            <p id="guidebookSalesCount">0ê±´</p>
                        </div>
                    </div>

                    <div class="stat-card" style="background: linear-gradient(135deg, rgba(44,95,79,0.05), rgba(26,72,56,0.05)); border-left: 4px solid #2c5f4f;">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #2c5f4f, #1a4838);">
                            <i class="fas fa-won-sign" style="color: white; font-size: 1.5rem;"></i>
                        </div>
                        <div class="stat-info">
                            <h3>ê°€ì´ë“œë¶ ë§¤ì¶œ</h3>
                            <p id="guidebookRevenue">â‚©0</p>
                        </div>
                    </div>

                    <div class="stat-card" style="background: linear-gradient(135deg, rgba(103,126,234,0.05), rgba(118,75,162,0.05)); border-left: 4px solid #667eea;">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <i class="fas fa-crown" style="color: white; font-size: 1.5rem;"></i>
                        </div>
                        <div class="stat-info">
                            <h3>ì¸ê¸° ê°€ì´ë“œë¶</h3>
                            <p id="topGuidebook">-</p>
                        </div>
                    </div>
                </div>

                <!-- ìµœê·¼ ê°€ì´ë“œë¶ êµ¬ë§¤ ë‚´ì—­ -->
                <div class="guidebook-orders" style="background: white; border-radius: 12px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-top: 1.5rem;">
                    <h3 style="margin-bottom: 1.5rem; color: #2c5f4f;">ğŸ“‹ ìµœê·¼ ê°€ì´ë“œë¶ êµ¬ë§¤ ë‚´ì—­</h3>
                    <div id="guidebookOrdersList">
                        <!-- ë™ì ìœ¼ë¡œ ë¡œë“œë¨ -->
                    </div>
                </div>
            </div>

            <!-- Activities -->
            <div class="activities">
                <h3>ìµœê·¼ í™œë™</h3>
                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="activity-info">
                        <p class="activity-text"><strong>ê¹€ë¯¼ì§€</strong>ë‹˜ì´ ê°€ì…í–ˆìŠµë‹ˆë‹¤</p>
                        <p class="activity-time">5ë¶„ ì „</p>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <div class="activity-info">
                        <p class="activity-text"><strong>ì´ì¤€í˜¸</strong>ë‹˜ì´ <strong>MBTI ê²€ì‚¬</strong>ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤</p>
                        <p class="activity-time">12ë¶„ ì „</p>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="activity-info">
                        <p class="activity-text"><strong>ë°•ì„œì—°</strong>ë‹˜ì´ í”„ë¦¬ë¯¸ì—„ í”Œëœì„ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤</p>
                        <p class="activity-time">23ë¶„ ì „</p>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">
                        <i class="fas fa-undo"></i>
                    </div>
                    <div class="activity-info">
                        <p class="activity-text"><strong>ìµœì§€ìš°</strong>ë‹˜ì˜ í™˜ë¶ˆ ìš”ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤</p>
                        <p class="activity-time">1ì‹œê°„ ì „</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ë¡œê·¸ì¸ í™•ì¸ (í˜ì´ì§€ ë¡œë“œ ì¦‰ì‹œ ì‹¤í–‰)
        (function checkAuth() {
            const adminAuth = localStorage.getItem('adminAuth') || sessionStorage.getItem('adminAuth');
            
            if (!adminAuth) {
                window.location.replace('login.html');
                return;
            }
            
            try {
                const authData = JSON.parse(adminAuth);
                if (!authData.isLoggedIn) {
                    window.location.replace('login.html');
                    return;
                }
            } catch (e) {
                localStorage.removeItem('adminAuth');
                sessionStorage.removeItem('adminAuth');
                window.location.replace('login.html');
                return;
            }
        })();

        // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('adminAuth');
                sessionStorage.removeItem('adminAuth');
                alert('âœ… ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = 'login.html';
            }
        }

        // ê°€ì´ë“œë¶ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
        function scrollToGuidebook() {
            const section = document.querySelector('.guidebook-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // ê°€ì´ë“œë¶ íŒë§¤ ë°ì´í„° ë¡œë“œ
        function loadGuidebookData() {
            const purchases = JSON.parse(localStorage.getItem('guidebook_purchases') || '[]');
            
            // ì´ íŒë§¤ ê±´ìˆ˜
            document.getElementById('guidebookSalesCount').textContent = `${purchases.length}ê±´`;
            
            // ì´ ë§¤ì¶œ
            const totalRevenue = purchases.reduce((sum, p) => sum + p.amount, 0);
            document.getElementById('guidebookRevenue').textContent = `â‚©${totalRevenue.toLocaleString()}`;
            
            // ì¸ê¸° ê°€ì´ë“œë¶ ê³„ì‚°
            const productCount = {};
            purchases.forEach(p => {
                const productName = p.productName.split(' ')[0];
                productCount[productName] = (productCount[productName] || 0) + 1;
            });
            
            const topProduct = Object.entries(productCount)
                .sort((a, b) => b[1] - a[1])[0];
            
            document.getElementById('topGuidebook').textContent = 
                topProduct ? `${topProduct[0]} (${topProduct[1]}ê±´)` : 'ë°ì´í„° ì—†ìŒ';
            
            // ìµœê·¼ êµ¬ë§¤ ë‚´ì—­ í‘œì‹œ
            loadRecentOrders(purchases);
        }

        // ìµœê·¼ êµ¬ë§¤ ë‚´ì—­ í‘œì‹œ
        function loadRecentOrders(purchases) {
            const container = document.getElementById('guidebookOrdersList');
            
            if (purchases.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: #999;">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <p>ì•„ì§ ê°€ì´ë“œë¶ êµ¬ë§¤ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>
                    </div>
                `;
                return;
            }
            
            const recent = purchases.slice(-10).reverse();
            
            container.innerHTML = `
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #e0e0e0;">
                            <th style="padding: 1rem; text-align: left; color: #666;">ì£¼ë¬¸ë²ˆí˜¸</th>
                            <th style="padding: 1rem; text-align: left; color: #666;">ìƒí’ˆëª…</th>
                            <th style="padding: 1rem; text-align: left; color: #666;">êµ¬ë§¤ì</th>
                            <th style="padding: 1rem; text-align: right; color: #666;">ê¸ˆì•¡</th>
                            <th style="padding: 1rem; text-align: center; color: #666;">êµ¬ë§¤ì¼</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${recent.map(order => `
                            <tr style="border-bottom: 1px solid #f0f0f0;">
                                <td style="padding: 1rem; font-size: 0.9rem; color: #999;">${order.orderId.substring(0, 20)}...</td>
                                <td style="padding: 1rem; font-weight: 600; color: #2c5f4f;">ğŸ“˜ ${order.productName}</td>
                                <td style="padding: 1rem;">${order.customerName}</td>
                                <td style="padding: 1rem; text-align: right; font-weight: 700; color: #d4af37;">â‚©${order.amount.toLocaleString()}</td>
                                <td style="padding: 1rem; text-align: center; font-size: 0.9rem;">${new Date(order.paymentDate).toLocaleDateString('ko-KR')}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê°€ì´ë“œë¶ ë°ì´í„° ë¡œë“œ
        document.addEventListener('DOMContentLoaded', () => {
            loadGuidebookData();
        });
    </script>
</body>
</html>
