<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì‹¬ë¦¬ ìƒë‹´ - MindScan</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #2c5f4f;
            --accent-gold: #d4af37;
            --bg-light: #f5f7fa;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #2c5f4f 0%, #1a4838 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .ai-counsel-container {
            max-width: 1000px;
            width: 100%;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: grid;
            grid-template-columns: 300px 1fr;
            height: 700px;
        }

        /* ì™¼ìª½: ìƒë‹´ ì´ë ¥ -->
        .counsel-sidebar {
            background: #f5f7fa;
            border-right: 1px solid #e8ecef;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 2rem;
            background: var(--primary-green);
            color: white;
        }

        .sidebar-header h2 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-header p {
            font-size: 0.75rem;
            opacity: 0.8;
            margin: 0;
        }

        .counsel-sessions {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .new-session-btn {
            margin: 0 1rem 1rem;
            padding: 1rem;
            background: var(--accent-gold);
            color: #1a1a1a;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .new-session-btn:hover {
            background: #e6c255;
            transform: translateY(-2px);
        }

        .session-item {
            background: white;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .session-item:hover {
            border-color: var(--accent-gold);
        }

        .session-item.active {
            border-color: var(--primary-green);
            background: #e8f5f1;
        }

        .session-title {
            font-weight: 600;
            color: var(--primary-green);
            margin-bottom: 0.25rem;
            font-size: 0.875rem;
        }

        .session-time {
            font-size: 0.75rem;
            color: #999;
        }

        .session-preview {
            font-size: 0.75rem;
            color: #666;
            margin-top: 0.5rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* ì˜¤ë¥¸ìª½: ìƒë‹´ ì±„íŒ… */
        .counsel-main {
            display: flex;
            flex-direction: column;
        }

        .counsel-header {
            padding: 2rem;
            border-bottom: 1px solid #e8ecef;
            background: white;
        }

        .counsel-header h1 {
            color: var(--primary-green);
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .counsel-header .subtitle {
            color: #666;
            font-size: 0.875rem;
        }

        .counsel-topics {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .topic-tag {
            padding: 0.5rem 1rem;
            background: #f5f7fa;
            border: 2px solid #e8ecef;
            border-radius: 20px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .topic-tag:hover,
        .topic-tag.active {
            background: var(--primary-green);
            color: white;
            border-color: var(--primary-green);
        }

        .counsel-messages {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            background: #f5f7fa;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #999;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .empty-state h3 {
            color: var(--primary-green);
            margin-bottom: 0.5rem;
        }

        .counsel-message {
            display: flex;
            margin-bottom: 1.5rem;
            animation: messageSlide 0.3s ease;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .counsel-message.user {
            justify-content: flex-end;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .counsel-message.ai .message-avatar {
            background: var(--primary-green);
            margin-right: 1rem;
        }

        .counsel-message.user .message-avatar {
            background: var(--accent-gold);
            margin-left: 1rem;
            order: 2;
        }

        .message-content {
            max-width: 70%;
        }

        .message-bubble {
            padding: 1rem 1.25rem;
            border-radius: 12px;
            line-height: 1.7;
        }

        .counsel-message.ai .message-bubble {
            background: white;
            color: #1a1a1a;
            border-bottom-left-radius: 4px;
        }

        .counsel-message.user .message-bubble {
            background: var(--accent-gold);
            color: #1a1a1a;
            border-bottom-right-radius: 4px;
        }

        .message-time {
            font-size: 0.625rem;
            color: #999;
            margin-top: 0.5rem;
        }

        .counsel-input {
            padding: 1.5rem;
            border-top: 1px solid #e8ecef;
            background: white;
        }

        .input-wrapper {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .input-wrapper textarea {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e8ecef;
            border-radius: 12px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 0.875rem;
            resize: none;
            min-height: 60px;
            max-height: 120px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .input-wrapper textarea:focus {
            border-color: var(--primary-green);
        }

        .send-button {
            padding: 1rem 2rem;
            background: var(--primary-green);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .send-button:hover {
            background: #1a4838;
            transform: scale(1.05);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: white;
            border-radius: 12px;
            width: fit-content;
            margin-bottom: 1.5rem;
        }

        .typing-indicator.show {
            display: flex;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--primary-green);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .suggest-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .suggest-question {
            padding: 0.75rem 1.25rem;
            background: white;
            border: 2px solid #e8ecef;
            border-radius: 20px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .suggest-question:hover {
            background: var(--primary-green);
            color: white;
            border-color: var(--primary-green);
        }

        @media (max-width: 968px) {
            .ai-counsel-container {
                grid-template-columns: 1fr;
                height: auto;
                min-height: 600px;
            }

            .counsel-sidebar {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="ai-counsel-container">
        <!-- ì™¼ìª½: ìƒë‹´ ì´ë ¥ -->
        <div class="counsel-sidebar">
            <div class="sidebar-header">
                <h2>ğŸ¤– AI ìƒë‹´</h2>
                <p>ë‹¹ì‹ ì˜ ê³ ë¯¼ì„ ë“¤ì–´ë“œë¦½ë‹ˆë‹¤</p>
            </div>

            <button class="new-session-btn" onclick="startNewSession()">
                â• ìƒˆ ìƒë‹´ ì‹œì‘
            </button>

            <div class="counsel-sessions" id="counselSessions">
                <!-- ìƒë‹´ ì„¸ì…˜ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½: ìƒë‹´ ì±„íŒ… -->
        <div class="counsel-main">
            <div class="counsel-header">
                <h1>AI ì‹¬ë¦¬ ìƒë‹´</h1>
                <p class="subtitle">ë¬´ì—‡ì´ë“  í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”. 24ì‹œê°„ ì–¸ì œë“ ì§€ ë„ì™€ë“œë¦½ë‹ˆë‹¤.</p>

                <div class="counsel-topics">
                    <div class="topic-tag" onclick="selectTopic(this, 'ì§„ë¡œ')">ğŸ’¼ ì§„ë¡œ ê³ ë¯¼</div>
                    <div class="topic-tag" onclick="selectTopic(this, 'ì—°ì• ')">ğŸ’‘ ì—°ì•  ê³ ë¯¼</div>
                    <div class="topic-tag" onclick="selectTopic(this, 'ëŒ€ì¸ê´€ê³„')">ğŸ‘¥ ëŒ€ì¸ê´€ê³„</div>
                    <div class="topic-tag" onclick="selectTopic(this, 'ìŠ¤íŠ¸ë ˆìŠ¤')">ğŸ˜° ìŠ¤íŠ¸ë ˆìŠ¤</div>
                    <div class="topic-tag" onclick="selectTopic(this, 'ìê¸°ê³„ë°œ')">ğŸ¯ ìê¸°ê³„ë°œ</div>
                </div>
            </div>

            <div class="counsel-messages" id="counselMessages">
                <div class="empty-state">
                    <div class="empty-state-icon">ğŸ¤–</div>
                    <h3>AI ìƒë‹´ì‚¬ê°€ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤</h3>
                    <p>ì–´ë–¤ ê³ ë¯¼ì´ë“  í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”</p>

                    <div class="suggest-questions">
                        <button class="suggest-question" onclick="askQuestion(this.textContent)">
                            ì§ì—…ì„ ë°”ê¾¸ê³  ì‹¶ì€ë° ìš©ê¸°ê°€ ë‚˜ì§€ ì•Šì•„ìš”
                        </button>
                        <button class="suggest-question" onclick="askQuestion(this.textContent)">
                            ì‚¬ëŒë“¤ê³¼ ê¹Šì€ ëŒ€í™”ë¥¼ ë‚˜ëˆ„ê¸° ì–´ë ¤ì›Œìš”
                        </button>
                        <button class="suggest-question" onclick="askQuestion(this.textContent)">
                            ë‚˜ë§Œ ë’¤ì²˜ì§€ëŠ” ê²ƒ ê°™ì•„ì„œ ë¶ˆì•ˆí•´ìš”
                        </button>
                    </div>
                </div>
            </div>

            <div class="counsel-input">
                <div class="input-wrapper">
                    <textarea 
                        id="counselInput" 
                        placeholder="ê³ ë¯¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”..."
                        onkeydown="if(event.key === 'Enter' && !event.shiftKey) { event.preventDefault(); sendCounselMessage(); }"
                    ></textarea>
                    <button class="send-button" onclick="sendCounselMessage()" id="sendBtn">
                        ì „ì†¡
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSession = null;
        let sessions = [];
        let selectedTopic = null;

        // AI ì‘ë‹µ ë°ì´í„°ë² ì´ìŠ¤
        const aiResponses = {
            'ì§„ë¡œ': {
                keywords: ['ì§ì—…', 'ì§„ë¡œ', 'ì·¨ì—…', 'ì´ì§', 'ì»¤ë¦¬ì–´', 'ì¼', 'íšŒì‚¬'],
                responses: [
                    `ì§„ë¡œì— ëŒ€í•œ ê³ ë¯¼ì´ì‹œêµ°ìš”. ë¨¼ì € ìì‹ ì˜ ê°•ì ê³¼ ê°€ì¹˜ê´€ì„ ëª…í™•íˆ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

ë‹¹ì‹ ì˜ MBTI ìœ í˜•ì„ ì•Œê³  ê³„ì‹ ê°€ìš”? ì„±ê²© ìœ í˜•ì— ë”°ë¼ ì˜ ë§ëŠ” ì§ì—…ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´:
â€¢ ENFP: ì°½ì˜ì ì´ê³  ì‚¬ëŒ ì¤‘ì‹¬ì ì¸ ì¼ (ë§ˆì¼€í„°, ìƒë‹´ì‚¬)
â€¢ INTJ: ì „ëµì ì´ê³  ë¶„ì„ì ì¸ ì¼ (ë¶„ì„ê°€, ê¸°íšì)
â€¢ ESFJ: ì¡°ì§ì ì´ê³  í˜‘ë ¥ì ì¸ ì¼ (HR, êµì‚¬)

í™€ëœë“œ ì§ì—…ì ì„±ê²€ì‚¬ë¥¼ í•´ë³´ì‹œëŠ” ê²ƒë„ ì¶”ì²œë“œë ¤ìš”!`,
                    `ìš©ê¸°ë¥¼ ë‚´ê¸° ì–´ë ¤ìš°ì‹œë‹¤ë‹ˆ, ì¶©ë¶„íˆ ì´í•´í•©ë‹ˆë‹¤.

ë³€í™”ëŠ” í•­ìƒ ë‘ë µì£ . í•˜ì§€ë§Œ ë‹¤ìŒì„ ìƒê°í•´ë³´ì„¸ìš”:

1ï¸âƒ£ ìµœì•…ì˜ ê²½ìš° ì–´ë–»ê²Œ ë ê¹Œ?
â†’ ëŒ€ë¶€ë¶„ ìƒê°ë³´ë‹¤ ê´œì°®ìŠµë‹ˆë‹¤

2ï¸âƒ£ ì§€ê¸ˆ ì•ˆ í•˜ë©´ 5ë…„ í›„ì—”?
â†’ í›„íšŒí•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤

3ï¸âƒ£ ì‘ì€ ì²«ê±¸ìŒë¶€í„° ì‹œì‘í•˜ê¸°
â†’ ì´ë ¥ì„œ ì‘ì„±, ì‚¬ëŒ ë§Œë‚˜ê¸° ë“±

ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ì„ íŒŒì•…í•˜ë©´ ë” ëª…í™•í•œ ë°©í–¥ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”!`
                ]
            },
            'ì—°ì• ': {
                keywords: ['ì—°ì• ', 'ì‚¬ë‘', 'ì´ë³„', 'ì§ì‚¬ë‘', 'ë‚¨ìì¹œêµ¬', 'ì—¬ìì¹œêµ¬', 'íŒŒíŠ¸ë„ˆ'],
                responses: [
                    `ì—°ì•  ê³ ë¯¼ì´ì‹œêµ°ìš”. ê´€ê³„ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ì„œë¡œë¥¼ ì´í•´í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ë‹¹ì‹ ê³¼ ìƒëŒ€ë°©ì˜ ì„±ê²© ìœ í˜•ì„ ì•Œë©´ í›¨ì”¬ ìˆ˜ì›”í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.

ì˜ˆë¥¼ ë“¤ì–´:
â€¢ ENFP + INFJ: ì´ìƒì ì¸ ì¡°í•© (ì„œë¡œë¥¼ ê¹Šì´ ì´í•´)
â€¢ ESTJ + ISFP: ë‹¤ë¥¸ ì ì´ ë§¤ë ¥ì´ ë  ìˆ˜ ìˆìŒ
â€¢ INTP + ENTJ: ì§€ì  êµë¥˜ê°€ í™œë°œí•¨

MBTI ê²€ì‚¬ë¥¼ ê°™ì´ í•´ë³´ì‹œëŠ” ê±´ ì–´ë–¨ê¹Œìš”?`,
                    `ëŒ€ì¸ê´€ê³„ëŠ” ìì‹ ì„ ì´í•´í•˜ëŠ” ê²ƒë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤.

ë‹¹ì‹ ì˜ ì• ì°© ìœ í˜•ì„ ì•Œê³  ê³„ì‹ ê°€ìš”?

â€¢ ì•ˆì •í˜•: ê±´ê°•í•œ ê´€ê³„ í˜•ì„±
â€¢ íšŒí”¼í˜•: ê±°ë¦¬ë‘ê¸° ê²½í–¥
â€¢ ë¶ˆì•ˆí˜•: ê³¼ë„í•œ ê´€ì‹¬ ìš”êµ¬
â€¢ í˜¼ë€í˜•: ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ í–‰ë™

ì• ì°©ìœ í˜•ê²€ì‚¬ë¡œ ìì‹ ì˜ íŒ¨í„´ì„ íŒŒì•…í•˜ë©´ ê´€ê³„ê°€ í›¨ì”¬ ì‰¬ì›Œì§‘ë‹ˆë‹¤!`
                ]
            },
            'ëŒ€ì¸ê´€ê³„': {
                keywords: ['ì¹œêµ¬', 'ì‚¬ëŒ', 'ì†Œí†µ', 'ëŒ€í™”', 'ê´€ê³„', 'ëª¨ì„'],
                responses: [
                    `ëŒ€ì¸ê´€ê³„ì—ì„œ ì–´ë ¤ì›€ì„ ê²ªê³  ê³„ì‹œëŠ”êµ°ìš”.

ë¨¼ì € ìì‹ ì˜ ì†Œí†µ ìŠ¤íƒ€ì¼ì„ íŒŒì•…í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

DISC í–‰ë™ìœ í˜•ìœ¼ë¡œ ë³´ë©´:
â€¢ D(ì£¼ë„í˜•): ì§ì„¤ì ì´ê³  ëª©í‘œ ì§€í–¥ì 
â€¢ I(ì‚¬êµí˜•): ì—´ì •ì ì´ê³  ì‚¬êµì 
â€¢ S(ì•ˆì •í˜•): í˜‘ì¡°ì ì´ê³  ì¼ê´€ì„± ìˆìŒ
â€¢ C(ì‹ ì¤‘í˜•): ë¶„ì„ì ì´ê³  ì²´ê³„ì 

ìƒëŒ€ë°©ì˜ ìŠ¤íƒ€ì¼ì„ ì´í•´í•˜ë©´ ê°ˆë“±ì„ ì¤„ì¼ ìˆ˜ ìˆì–´ìš”!`,
                    `ê¹Šì€ ëŒ€í™”ê°€ ì–´ë µë‹¤ë©´, ë¨¼ì € ê²½ì²­í•˜ëŠ” ë²•ì„ ë°°ì›Œë³´ì„¸ìš”.

EQ(ê°ì„±ì§€ëŠ¥)ê°€ ë†’ì€ ì‚¬ëŒë“¤ì˜ íŠ¹ì§•:
1ï¸âƒ£ ìƒëŒ€ë°©ì˜ ê°ì •ì„ ë¨¼ì € ê³µê°
2ï¸âƒ£ íŒë‹¨ë³´ë‹¤ëŠ” ì´í•´
3ï¸âƒ£ ì—´ë¦° ì§ˆë¬¸ìœ¼ë¡œ ëŒ€í™” ìœ ë„
4ï¸âƒ£ ë¹„ì–¸ì–´ì  ì‹ í˜¸ íŒŒì•…

EQ ê²€ì‚¬ë¥¼ í†µí•´ ìì‹ ì˜ ê°ì„±ì§€ëŠ¥ì„ íŒŒì•…í•´ë³´ì„¸ìš”!`
                ]
            },
            'ìŠ¤íŠ¸ë ˆìŠ¤': {
                keywords: ['ìŠ¤íŠ¸ë ˆìŠ¤', 'ë¶ˆì•ˆ', 'ìš°ìš¸', 'í˜ë“¤', 'ì§€ì³', 'ë²ˆì•„ì›ƒ'],
                responses: [
                    `ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë§ì´ ë°›ê³  ê³„ì‹œëŠ”êµ°ìš”. ë¨¼ì € ê¹Šê²Œ ìˆ¨ì„ ì‰¬ì–´ë³´ì„¸ìš”. ğŸ§˜â€â™€ï¸

ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ë²•:

1ï¸âƒ£ ì‹ ì²´ì  ë°©ë²•
â€¢ ê·œì¹™ì ì¸ ìš´ë™
â€¢ ì¶©ë¶„í•œ ìˆ˜ë©´
â€¢ ëª…ìƒê³¼ í˜¸í¡

2ï¸âƒ£ ì‹¬ë¦¬ì  ë°©ë²•
â€¢ ê¸ì •ì  ì‚¬ê³ 
â€¢ ê°ì‚¬ ì¼ê¸°
â€¢ ì „ë¬¸ê°€ ìƒë‹´

3ï¸âƒ£ ì‚¬íšŒì  ë°©ë²•
â€¢ ì¹œêµ¬ì™€ ëŒ€í™”
â€¢ ì·¨ë¯¸ í™œë™
â€¢ íœ´ì‹ê³¼ ì—¬í–‰

ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ë³„ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ë²•ì„ ì•Œë ¤ë“œë¦´ ìˆ˜ ìˆì–´ìš”!`,
                    `ë¶ˆì•ˆê°ì´ í¬ì‹œêµ°ìš”. ë¨¼ì € ê·¸ ê°ì •ì„ ì¸ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

ë¶ˆì•ˆì„ ë‹¤ìŠ¤ë¦¬ëŠ” ë²•:

ğŸŒ± ì§€ê¸ˆ ì´ ìˆœê°„ì— ì§‘ì¤‘í•˜ê¸°
â€¢ 5-4-3-2-1 ê¸°ë²• (5ê°œ ë³´ì´ëŠ” ê²ƒ, 4ê°œ ë§Œì§ˆ ìˆ˜ ìˆëŠ” ê²ƒ...)

ğŸŒ± ìƒê° ê¸°ë¡í•˜ê¸°
â€¢ ë¶ˆì•ˆí•œ ìƒê°ì„ ê¸€ë¡œ ì“°ë©´ ê°ê´€í™”ë¨

ğŸŒ± ì „ë¬¸ê°€ ë„ì›€
â€¢ ì‹¬í•œ ê²½ìš° ì „ë¬¸ ìƒë‹´ í•„ìš”

ì •ì‹ ê±´ê°• ìê°€ì§„ë‹¨ì„ í•´ë³´ì‹œëŠ” ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤.`
                ]
            },
            'ìê¸°ê³„ë°œ': {
                keywords: ['ìê¸°ê³„ë°œ', 'ì„±ì¥', 'ëª©í‘œ', 'ê³„íš', 'ìŠµê´€', 'ë™ê¸°ë¶€ì—¬'],
                responses: [
                    `ìê¸°ê³„ë°œì— ê´€ì‹¬ì´ ë§ìœ¼ì‹œêµ°ìš”! ğŸ‘

ì„±ê³µì ì¸ ìê¸°ê³„ë°œ 3ë‹¨ê³„:

1ï¸âƒ£ ìê¸° ì´í•´
â€¢ ê°•ì ê³¼ ì•½ì  íŒŒì•…
â€¢ ê°€ì¹˜ê´€ê³¼ ëª©í‘œ ëª…í™•í™”
â€¢ ì„±ê²© ìœ í˜• ì´í•´

2ï¸âƒ£ ëª©í‘œ ì„¤ì •
â€¢ SMART ëª©í‘œ (êµ¬ì²´ì , ì¸¡ì • ê°€ëŠ¥, ë‹¬ì„± ê°€ëŠ¥...)
â€¢ ì‘ì€ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ê¸°

3ï¸âƒ£ ì‹¤í–‰ê³¼ ìŠµê´€í™”
â€¢ 21ì¼ ë²•ì¹™
â€¢ í™˜ê²½ ë§Œë“¤ê¸°
â€¢ ê¸°ë¡ê³¼ í”¼ë“œë°±

ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ì— ë§ëŠ” ìê¸°ê³„ë°œ ë°©ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”!`,
                    `ë’¤ì²˜ì§„ë‹¤ê³  ëŠë¼ì‹œëŠ”êµ°ìš”. í•˜ì§€ë§Œ ê°ìì˜ ì†ë„ê°€ ìˆìŠµë‹ˆë‹¤. ğŸŒ±

ë¹„êµí•˜ì§€ ë§ê³  ìì‹ ì—ê²Œ ì§‘ì¤‘í•˜ì„¸ìš”:

âœ¨ íƒ€ì¸ê³¼ ë¹„êµ â†’ ë‚˜ì˜ ê³¼ê±°ì™€ ë¹„êµ
âœ¨ ì™„ë²½ì£¼ì˜ â†’ ì ì§„ì  ê°œì„ 
âœ¨ í° ëª©í‘œ â†’ ì‘ì€ ì„±ê³µ ê²½í—˜

ì„±ê²© ìœ í˜•ë³„ ë§ì¶¤ ìê¸°ê³„ë°œ:
â€¢ ENFP: ì•„ì´ë””ì–´ë¥¼ ì‹¤í–‰ìœ¼ë¡œ
â€¢ INTJ: ì²´ê³„ì  ê³„íš ì‹¤í–‰
â€¢ ISFP: ê°ê°ì  ê²½í—˜ ì¤‘ì‹œ

ë‹¹ì‹ ì˜ ìœ í˜•ì„ ì•Œë©´ ë” íš¨ê³¼ì ìœ¼ë¡œ ì„±ì¥í•  ìˆ˜ ìˆì–´ìš”!`
                ]
            }
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ
        window.addEventListener('load', function() {
            loadSessions();
            addWelcomeMessage();
        });

        // í™˜ì˜ ë©”ì‹œì§€
        function addWelcomeMessage() {
            setTimeout(() => {
                addAIMessage(`ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹ MindScan AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤.

ë¬´ì—‡ì´ë“  í¸í•˜ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”. 24ì‹œê°„ ì–¸ì œë“ ì§€ ë„ì™€ë“œë¦½ë‹ˆë‹¤.

ì–´ë–¤ ì£¼ì œì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?`);
            }, 500);
        }

        // í† í”½ ì„ íƒ
        function selectTopic(element, topic) {
            document.querySelectorAll('.topic-tag').forEach(tag => tag.classList.remove('active'));
            element.classList.add('active');
            selectedTopic = topic;
        }

        // ì œì•ˆ ì§ˆë¬¸ í´ë¦­
        function askQuestion(question) {
            document.getElementById('counselInput').value = question;
            sendCounselMessage();
        }

        // ë©”ì‹œì§€ ì „ì†¡
        function sendCounselMessage() {
            const input = document.getElementById('counselInput');
            const message = input.value.trim();
            
            if (!message) return;

            // Empty state ì œê±°
            const emptyState = document.querySelector('.empty-state');
            if (emptyState) emptyState.remove();

            // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
            addUserMessage(message);
            input.value = '';

            // AI ì‘ë‹µ (1.5ì´ˆ í›„)
            showTypingIndicator();
            setTimeout(() => {
                hideTypingIndicator();
                const response = getAIResponse(message);
                addAIMessage(response);
                
                // ì„¸ì…˜ ì €ì¥
                saveCurrentSession();
            }, 1500);
        }

        // AI ì‘ë‹µ ìƒì„±
        function getAIResponse(message) {
            const lowerMessage = message.toLowerCase();

            // í† í”½ë³„ ì‘ë‹µ
            for (const [topic, data] of Object.entries(aiResponses)) {
                for (const keyword of data.keywords) {
                    if (lowerMessage.includes(keyword)) {
                        const responses = data.responses;
                        return responses[Math.floor(Math.random() * responses.length)];
                    }
                }
            }

            // ê¸°ë³¸ ì‘ë‹µ
            return `ê³ ë¯¼ì„ ë‚˜ëˆ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

ì¡°ê¸ˆ ë” êµ¬ì²´ì ìœ¼ë¡œ ë§ì”€í•´ì£¼ì‹œë©´ ë” ë„ì›€ì´ ë  ê²ƒ ê°™ì•„ìš”.

ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•´ì£¼ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤:
ğŸ’¼ ì§„ë¡œ/ì ì„± ê³ ë¯¼
ğŸ’‘ ì—°ì• /ëŒ€ì¸ê´€ê³„ ê³ ë¯¼
ğŸ¯ ìê¸°ê³„ë°œ/ì„±ì¥ ê³ ë¯¼
ğŸ˜° ìŠ¤íŠ¸ë ˆìŠ¤/ë¶ˆì•ˆ ê³ ë¯¼

ë˜ëŠ” ì‹¬ë¦¬ê²€ì‚¬ë¥¼ í†µí•´ ìì‹ ì„ ë” ê¹Šì´ ì´í•´í•´ë³´ì„¸ìš”!`;
        }

        // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
        function addUserMessage(text) {
            const messagesDiv = document.getElementById('counselMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'counsel-message user';
            messageDiv.innerHTML = `
                <div class="message-content">
                    <div class="message-bubble">
                        ${text}
                    </div>
                    <div class="message-time">${getCurrentTime()}</div>
                </div>
                <div class="message-avatar">ğŸ‘¤</div>
            `;
            messagesDiv.appendChild(messageDiv);
            scrollToBottom();
        }

        // AI ë©”ì‹œì§€ ì¶”ê°€
        function addAIMessage(text) {
            const messagesDiv = document.getElementById('counselMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'counsel-message ai';
            messageDiv.innerHTML = `
                <div class="message-avatar">ğŸ¤–</div>
                <div class="message-content">
                    <div class="message-bubble">
                        ${text.replace(/\n/g, '<br>')}
                    </div>
                    <div class="message-time">${getCurrentTime()}</div>
                </div>
            `;
            messagesDiv.appendChild(messageDiv);
            scrollToBottom();
        }

        // íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°
        function showTypingIndicator() {
            const messagesDiv = document.getElementById('counselMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'counsel-message ai';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="message-avatar">ğŸ¤–</div>
                <div class="typing-indicator show">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            messagesDiv.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const typingDiv = document.getElementById('typingIndicator');
            if (typingDiv) typingDiv.remove();
        }

        // ì„¸ì…˜ ê´€ë¦¬
        function startNewSession() {
            const sessionId = Date.now();
            currentSession = {
                id: sessionId,
                title: 'ìƒˆ ìƒë‹´',
                messages: [],
                createdAt: new Date().toISOString()
            };
            
            // ë©”ì‹œì§€ ì´ˆê¸°í™”
            document.getElementById('counselMessages').innerHTML = '';
            addWelcomeMessage();
        }

        function saveCurrentSession() {
            if (!currentSession) return;

            const messages = Array.from(document.querySelectorAll('.counsel-message')).map(msg => {
                return {
                    type: msg.classList.contains('ai') ? 'ai' : 'user',
                    content: msg.querySelector('.message-bubble').textContent.trim()
                };
            });

            currentSession.messages = messages;
            
            // ì²« ë©”ì‹œì§€ë¡œ ì œëª© ì„¤ì •
            if (messages.length > 1) {
                currentSession.title = messages[1].content.substring(0, 30) + '...';
            }

            // LocalStorageì— ì €ì¥
            const savedSessions = JSON.parse(localStorage.getItem('mindscan_counsel_sessions') || '[]');
            const existingIndex = savedSessions.findIndex(s => s.id === currentSession.id);
            
            if (existingIndex >= 0) {
                savedSessions[existingIndex] = currentSession;
            } else {
                savedSessions.unshift(currentSession);
            }
            
            localStorage.setItem('mindscan_counsel_sessions', JSON.stringify(savedSessions.slice(0, 20))); // ìµœëŒ€ 20ê°œ
            
            loadSessions();
        }

        function loadSessions() {
            const sessionsDiv = document.getElementById('counselSessions');
            const savedSessions = JSON.parse(localStorage.getItem('mindscan_counsel_sessions') || '[]');
            
            if (savedSessions.length === 0) {
                sessionsDiv.innerHTML = '<p style="text-align: center; color: #999; padding: 2rem;">ì•„ì§ ìƒë‹´ ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤</p>';
                return;
            }
            
            sessionsDiv.innerHTML = savedSessions.map(session => `
                <div class="session-item" onclick="loadSession(${session.id})">
                    <div class="session-title">${session.title}</div>
                    <div class="session-time">${formatDate(session.createdAt)}</div>
                    <div class="session-preview">${session.messages[0]?.content || ''}</div>
                </div>
            `).join('');
        }

        function loadSession(sessionId) {
            const savedSessions = JSON.parse(localStorage.getItem('mindscan_counsel_sessions') || '[]');
            const session = savedSessions.find(s => s.id === sessionId);
            
            if (!session) return;
            
            currentSession = session;
            
            // ë©”ì‹œì§€ ë³µì›
            const messagesDiv = document.getElementById('counselMessages');
            messagesDiv.innerHTML = '';
            
            session.messages.forEach(msg => {
                if (msg.type === 'ai') {
                    addAIMessage(msg.content);
                } else {
                    addUserMessage(msg.content);
                }
            });
        }

        // ìœ í‹¸ë¦¬í‹°
        function getCurrentTime() {
            return new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return 'ë°©ê¸ˆ ì „';
            if (diff < 3600000) return Math.floor(diff / 60000) + 'ë¶„ ì „';
            if (diff < 86400000) return Math.floor(diff / 3600000) + 'ì‹œê°„ ì „';
            return date.toLocaleDateString('ko-KR');
        }

        function scrollToBottom() {
            const messagesDiv = document.getElementById('counselMessages');
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
    </script>
</body>
</html>
