<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì• ì°©ìœ í˜•ê²€ì‚¬ - Mentora</title>
    <meta name="description" content="ë‚˜ì˜ ì• ì°© ìœ í˜• ì•Œì•„ë³´ê¸°">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/nav-common.css">
    <link rel="stylesheet" href="css/test-common.css">
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <header class="page-header">
        <nav class="page-nav">
            <div class="page-nav-left">
                <a href="index.html" class="page-nav-logo">
                    <img src="images/logo-brain-hd.png" alt="Mentora" class="page-nav-logo-icon">
                    <span class="page-nav-logo-text">Mentora</span>
                </a>
                <div class="page-nav-divider"></div>
                <h2 class="page-nav-title">ì• ì°©ìœ í˜•ê²€ì‚¬</h2>
            </div>
            <div class="page-nav-right">
                <button class="page-nav-btn page-nav-btn-back" onclick="history.back()">
                    <i class="fas fa-arrow-left"></i>
                    <span>ë’¤ë¡œê°€ê¸°</span>
                </button>
                <a href="index.html" class="page-nav-btn page-nav-btn-home">
                    <i class="fas fa-home"></i>
                    <span>í™ˆìœ¼ë¡œ</span>
                </a>
            </div>
        </nav>
    </header>

    <!-- í˜ì´ì§€ ì»¨í…ì¸  -->
    <div class="page-content-wrapper">
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ’ ì• ì°©ìœ í˜•ê²€ì‚¬</h1>
            <p>ë‚˜ì˜ ê´€ê³„ íŒ¨í„´ê³¼ ì• ì°© ìŠ¤íƒ€ì¼ì„ ì´í•´í•˜ì„¸ìš”</p>
        </div>

        <div id="startScreen" class="start-screen">
            <div class="start-icon">ğŸ’</div>
            <h2>ì• ì°©ìœ í˜• ê²€ì‚¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤</h2>
            <p>ì•ˆì •í˜•, íšŒí”¼í˜•, ë¶ˆì•ˆí˜•, í˜¼ë€í˜•<br>4ê°€ì§€ ì• ì°© ìœ í˜•ì„ ë¶„ì„í•©ë‹ˆë‹¤.</p>

            <div class="test-info">
                <div class="info-item">
                    <div class="info-icon">â±ï¸</div>
                    <div class="info-label">ì†Œìš” ì‹œê°„</div>
                    <div class="info-value">12ë¶„</div>
                </div>
                <div class="info-item">
                    <div class="info-icon">ğŸ“Š</div>
                    <div class="info-label">ì§ˆë¬¸ ìˆ˜</div>
                    <div class="info-value">36ê°œ</div>
                </div>
                <div class="info-item">
                    <div class="info-icon">ğŸ¯</div>
                    <div class="info-label">ìœ í˜•</div>
                    <div class="info-value">4ê°€ì§€</div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="startTest()">â–¶ ê²€ì‚¬ ì‹œì‘í•˜ê¸°</button>
            <button class="btn btn-secondary" onclick="location.href='index.html'" style="margin-top: 1rem;">ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>

        <div id="testScreen" style="display:none;">
            <div class="progress-container">
                <div class="progress-info">
                    <span id="questionCounter">ì§ˆë¬¸ 1 / 20</span>
                    <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar" id="progressFill"></div>
                </div>
            </div>
            
            <div class="question-container">
                <h3 class="question-text" id="questionText"></h3>
                <div class="answer-options" id="answerOptions"></div>
            </div>

            <div class="button-area">
                <button class="btn btn-secondary" onclick="prevQuestion()" id="prevBtn" style="display: none;">
                    <i class="fas fa-arrow-left"></i> ì´ì „
                </button>
                <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" disabled>
                    ë‹¤ìŒ <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <div id="resultScreen" style="display:none;">
            <div class="result-container">
                <div class="result-icon">ğŸ‰</div>
                <h2 class="result-title">ë‹¹ì‹ ì˜ ì• ì°© ìœ í˜•ì€</h2>
                <div class="result-type" id="resultType"></div>
                <div class="result-nickname" id="resultNickname"></div>
                <p class="result-description" id="resultDescription"></p>

                <div class="result-section">
                    <h3>ğŸ“Š ìœ í˜•ë³„ ì ìˆ˜</h3>
                    <div id="attachmentChart" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin: 1rem 0;"></div>
                </div>

                <div class="result-section">
                    <h3>ğŸ’¡ ìœ í˜• íŠ¹ì§•</h3>
                    <div id="resultDetail"></div>
                </div>

                <div class="result-actions">
                    <button class="btn btn-primary" onclick="shareResult()">ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
                    <button class="btn btn-secondary" onclick="location.href='index.html'">ë‹¤ë¥¸ ê²€ì‚¬í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        const questions = [
            { q: "ë‚˜ëŠ” íƒ€ì¸ê³¼ ê°€ê¹Œì›Œì§€ëŠ” ê²ƒì´ í¸í•˜ë‹¤", type: "secure" },
            { q: "ë‚˜ëŠ” ë²„ë¦¼ë°›ì„ê¹Œ ê±±ì •ëœë‹¤", type: "anxious" },
            { q: "ë‚˜ëŠ” ë…ë¦½ì ì´ê³  í˜¼ì ìˆëŠ” ê²Œ í¸í•˜ë‹¤", type: "avoidant" },
            { q: "ë‚˜ëŠ” ê´€ê³„ì—ì„œ ì¼ê´€ì„±ì´ ì—†ë‹¤", type: "fearful" },
            { q: "ë‚˜ëŠ” ìƒëŒ€ë°©ì„ ë¯¿ê³  ì˜ì§€í•œë‹¤", type: "secure" },
            { q: "ë‚˜ëŠ” ìì£¼ ë¶ˆì•ˆê°ì„ ëŠë‚€ë‹¤", type: "anxious" },
            { q: "ë‚˜ëŠ” ê°ì • í‘œí˜„ì„ ì˜ í•˜ì§€ ì•ŠëŠ”ë‹¤", type: "avoidant" },
            { q: "ë‚˜ëŠ” ì¹œë°€í•¨ì´ ë‘ë µë‹¤", type: "fearful" },
            { q: "ë‚˜ëŠ” ê°ˆë“±ì„ ê±´ì„¤ì ìœ¼ë¡œ í•´ê²°í•œë‹¤", type: "secure" },
            { q: "ë‚˜ëŠ” ìƒëŒ€ì˜ ê´€ì‹¬ì´ ëŠì„ì—†ì´ í•„ìš”í•˜ë‹¤", type: "anxious" },
            { q: "ë‚˜ëŠ” í˜¼ì ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ í•œë‹¤", type: "avoidant" },
            { q: "ë‚˜ëŠ” ê´€ê³„ê°€ ë¶ˆì•ˆì •í•˜ë‹¤", type: "fearful" },
            { q: "ë‚˜ëŠ” ì•ˆì •ì ì¸ ê´€ê³„ë¥¼ ìœ ì§€í•œë‹¤", type: "secure" },
            { q: "ë‚˜ëŠ” ìƒëŒ€ì˜ ì‘ì€ í–‰ë™ì—ë„ ë¯¼ê°í•˜ë‹¤", type: "anxious" },
            { q: "ë‚˜ëŠ” ê±°ë¦¬ë¥¼ ë‘ë ¤ëŠ” ê²½í–¥ì´ ìˆë‹¤", type: "avoidant" },
            { q: "ë‚˜ëŠ” ê°€ê¹Œì›Œì§€ê³  ì‹¶ì§€ë§Œ ë‘ë µë‹¤", type: "fearful" },
            { q: "ë‚˜ëŠ” ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•œë‹¤", type: "secure" },
            { q: "ë‚˜ëŠ” ìì£¼ ì§ˆíˆ¬í•œë‹¤", type: "anxious" },
            { q: "ë‚˜ëŠ” ì•½ì†ì„ í”¼í•œë‹¤", type: "avoidant" },
            { q: "ë‚˜ëŠ” ê´€ê³„ì— í˜¼ë€ìŠ¤ëŸ½ë‹¤", type: "fearful" }
        ];

        const attachmentTypes = {
            secure: { name: "ì•ˆì •í˜•", desc: "ê±´ê°•í•˜ê³  ì•ˆì •ì ì¸ ê´€ê³„", icon: "ğŸ’š", color: "#27ae60" },
            anxious: { name: "ë¶ˆì•ˆí˜•", desc: "ê´€ê³„ì— ëŒ€í•œ ë¶ˆì•ˆê³¼ ê±±ì •", icon: "ğŸ’›", color: "#f39c12" },
            avoidant: { name: "íšŒí”¼í˜•", desc: "ë…ë¦½ì„±ì„ ì¤‘ì‹œí•˜ê³  ê±°ë¦¬ ìœ ì§€", icon: "ğŸ’™", color: "#3498db" },
            fearful: { name: "í˜¼ë€í˜•", desc: "ì¹œë°€í•¨ì— ëŒ€í•œ ì–‘ê°€ê°ì •", icon: "ğŸ’œ", color: "#9b59b6" }
        };

        let currentQuestion = 0;
        let answers = [];
        let scores = { secure: 0, anxious: 0, avoidant: 0, fearful: 0 };

        function startTest() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('testScreen').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const q = questions[currentQuestion];
            const questionText = document.getElementById('questionText');
            const answerOptions = document.getElementById('answerOptions');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            questionText.textContent = q.q;

            const options = [
                { text: 'ë§¤ìš° ê·¸ë ‡ë‹¤', value: 5 },
                { text: 'ê·¸ë ‡ë‹¤', value: 4 },
                { text: 'ë³´í†µì´ë‹¤', value: 3 },
                { text: 'ì•„ë‹ˆë‹¤', value: 2 },
                { text: 'ì „í˜€ ì•„ë‹ˆë‹¤', value: 1 }
            ];

            answerOptions.innerHTML = options.map((option, index) => `
                <button class="answer-option ${answers[currentQuestion] === option.value ? 'selected' : ''}" 
                        onclick="selectAnswer(${option.value})" 
                        data-value="${option.value}">
                    <span class="option-number">${index + 1}</span>
                    <span class="option-text">${option.text}</span>
                </button>
            `).join('');

            updateProgress();
            prevBtn.style.display = currentQuestion === 0 ? 'none' : 'inline-block';
            nextBtn.disabled = answers[currentQuestion] === undefined;
        }

        function selectAnswer(value) {
            answers[currentQuestion] = value;
            
            const buttons = document.querySelectorAll('.answer-option');
            buttons.forEach(btn => {
                btn.classList.remove('selected');
                if (parseInt(btn.dataset.value) === value) {
                    btn.classList.add('selected');
                }
            });

            document.getElementById('nextBtn').disabled = false;

            setTimeout(() => {
                nextQuestion();
            }, 300);
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) {
                return;
            }

            const q = questions[currentQuestion];
            scores[q.type] += answers[currentQuestion];

            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResult();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('questionCounter').textContent = `ì§ˆë¬¸ ${currentQuestion + 1} / ${questions.length}`;
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
        }

        function showResult() {
            document.getElementById('testScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            
            const maxType = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
            const typeInfo = attachmentTypes[maxType];
            
            document.getElementById('resultType').textContent = maxType.charAt(0).toUpperCase() + maxType.slice(1);
            document.getElementById('resultNickname').textContent = typeInfo.name;
            document.getElementById('resultDescription').textContent = typeInfo.desc;
            
            const maxScore = Math.max(...Object.values(scores));
            document.getElementById('attachmentChart').innerHTML = Object.entries(scores)
                .map(([type, score]) => {
                    const info = attachmentTypes[type];
                    const isActive = score === maxScore;
                    return `
                        <div style="background: ${isActive ? '#f5f7fa' : 'white'}; padding: 1.5rem; border-radius: 12px; border: 3px solid ${isActive ? '#2c5f4f' : '#e0e0e0'};">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">${info.icon}</div>
                            <h4 style="color: ${info.color}; margin: 0.5rem 0; font-size: 1.125rem;">${info.name}</h4>
                            <div style="background: #e0e0e0; height: 8px; border-radius: 4px; overflow: hidden; margin: 0.5rem 0;">
                                <div style="background: ${info.color}; height: 100%; width: ${score/maxScore*100}%; transition: width 0.5s ease;"></div>
                            </div>
                            <div style="color: #666; font-size: 0.875rem;">${score}ì </div>
                        </div>
                    `;
                }).join('');
            
            document.getElementById('resultDetail').innerHTML = getTypeDetails(maxType);
            saveResult(maxType, scores);
        }

        function getTypeDetails(type) {
            const details = {
                secure: `<div style="background: white; padding: 1.5rem; border-radius: 12px;">
                    <h4 style="color: #27ae60; font-size: 1.125rem; margin-bottom: 0.75rem;">âœ… ì•ˆì •í˜•ì˜ íŠ¹ì§•</h4>
                    <p style="color: #666; line-height: 1.8;">â€¢ ê±´ê°•í•œ ê´€ê³„ ìœ ì§€ ëŠ¥ë ¥<br>â€¢ ì‹ ë¢°ì™€ ì˜ì¡´ì˜ ê· í˜•<br>â€¢ ê°ˆë“± í•´ê²° ëŠ¥ë ¥<br>â€¢ ê°ì • í‘œí˜„ì´ ììœ ë¡œì›€</p>
                    <h4 style="color: #27ae60; font-size: 1.125rem; margin-top: 1.5rem; margin-bottom: 0.75rem;">ğŸ¯ ë°œì „ ë°©í–¥</h4>
                    <p style="color: #666; line-height: 1.8;">í˜„ì¬ì˜ ê¸ì •ì ì¸ íŒ¨í„´ì„ ìœ ì§€í•˜ë˜, íƒ€ì¸ì˜ ë‹¤ì–‘í•œ ì• ì°© ìœ í˜•ì„ ì´í•´í•˜ëŠ” ëŠ¥ë ¥ì„ í‚¤ìš°ì„¸ìš”.</p>
                    </div>`,
                anxious: `<div style="background: white; padding: 1.5rem; border-radius: 12px;">
                    <h4 style="color: #f39c12; font-size: 1.125rem; margin-bottom: 0.75rem;">ğŸ’› ë¶ˆì•ˆí˜•ì˜ íŠ¹ì§•</h4>
                    <p style="color: #666; line-height: 1.8;">â€¢ ë²„ë¦¼ë°›ì„ ê²ƒì— ëŒ€í•œ ë‘ë ¤ì›€<br>â€¢ ê³¼ë„í•œ ê´€ì‹¬ ìš”êµ¬<br>â€¢ ìƒëŒ€ì˜ í–‰ë™ì— ë¯¼ê°<br>â€¢ ëŠì„ì—†ëŠ” í™•ì¸ í•„ìš”</p>
                    <h4 style="color: #f39c12; font-size: 1.125rem; margin-top: 1.5rem; margin-bottom: 0.75rem;">ğŸ¯ ë°œì „ ë°©í–¥</h4>
                    <p style="color: #666; line-height: 1.8;">ìê¸° ê°€ì¹˜ë¥¼ ë†’ì´ê³ , ë…ë¦½ì„±ì„ í‚¤ìš°ì„¸ìš”. ëª…ìƒê³¼ ì‹¬ë¦¬ ìƒë‹´ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.</p>
                    </div>`,
                avoidant: `<div style="background: white; padding: 1.5rem; border-radius: 12px;">
                    <h4 style="color: #3498db; font-size: 1.125rem; margin-bottom: 0.75rem;">ğŸ’™ íšŒí”¼í˜•ì˜ íŠ¹ì§•</h4>
                    <p style="color: #666; line-height: 1.8;">â€¢ ë…ë¦½ì„± ê°•ì¡°<br>â€¢ ê°ì • í‘œí˜„ ì–´ë ¤ì›€<br>â€¢ ì¹œë°€í•¨ íšŒí”¼<br>â€¢ ê°œì¸ ê³µê°„ ì¤‘ì‹œ</p>
                    <h4 style="color: #3498db; font-size: 1.125rem; margin-top: 1.5rem; margin-bottom: 0.75rem;">ğŸ¯ ë°œì „ ë°©í–¥</h4>
                    <p style="color: #666; line-height: 1.8;">ì²œì²œíˆ ê°ì •ì„ í‘œí˜„í•˜ëŠ” ì—°ìŠµì„ í•˜ì„¸ìš”. ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê´€ê³„ì—ì„œ ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
                    </div>`,
                fearful: `<div style="background: white; padding: 1.5rem; border-radius: 12px;">
                    <h4 style="color: #9b59b6; font-size: 1.125rem; margin-bottom: 0.75rem;">ğŸ’œ í˜¼ë€í˜•ì˜ íŠ¹ì§•</h4>
                    <p style="color: #666; line-height: 1.8;">â€¢ ì¹œë°€í•¨ì— ëŒ€í•œ ì–‘ê°€ê°ì •<br>â€¢ ë¶ˆì•ˆì •í•œ ê´€ê³„ íŒ¨í„´<br>â€¢ ê°€ê¹Œì›Œì§€ê³  ì‹¶ì§€ë§Œ ë‘ë ¤ì›€<br>â€¢ ì¼ê´€ì„± ë¶€ì¡±</p>
                    <h4 style="color: #9b59b6; font-size: 1.125rem; margin-top: 1.5rem; margin-bottom: 0.75rem;">ğŸ¯ ë°œì „ ë°©í–¥</h4>
                    <p style="color: #666; line-height: 1.8;">ì „ë¬¸ê°€ì˜ ë„ì›€ì„ ë°›ì•„ ê³¼ê±° ìƒì²˜ë¥¼ ì¹˜ìœ í•˜ê³ , ì•ˆì „í•œ ê´€ê³„ ê²½í—˜ì„ ìŒ“ì•„ê°€ì„¸ìš”.</p>
                    </div>`
            };
            return details[type];
        }

        function saveResult(type, scores) {
            const result = { test: 'Attachment', type, scores, date: new Date().toISOString(), timestamp: Date.now() };
            const results = JSON.parse(localStorage.getItem('testResults') || '[]');
            results.push(result);
            localStorage.setItem('testResults', JSON.stringify(results));
        }

        function shareResult() {
            if (navigator.share) {
                navigator.share({ title: 'Mentora ì• ì°©ìœ í˜•ê²€ì‚¬ ê²°ê³¼', text: 'ë‚˜ì˜ ì• ì°© ìœ í˜•ì„ í™•ì¸í•´ë³´ì„¸ìš”!', url: window.location.href });
            } else {
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                navigator.clipboard.writeText(window.location.href);
            }
        }
    </script>
</body>
</html>
