<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>우울증 검사 - Mentora</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/nav-common.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8f0e8 100%);
            min-height: 100vh;
            padding-top: 80px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        .test-container {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 40px rgba(44, 95, 79, 0.1);
        }

        .test-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .test-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #2c5f4f 0%, #d4af37 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .test-header p {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.8;
        }

        .warning-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .warning-box p {
            color: #856404;
            font-size: 1rem;
            line-height: 1.6;
        }

        .start-screen {
            display: block;
        }

        .info-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .info-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            border: 2px dashed #d4af37;
        }

        .info-card i {
            font-size: 2.5rem;
            color: #2c5f4f;
            margin-bottom: 1rem;
        }

        .info-card h3 {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .info-card p {
            font-size: 2rem;
            font-weight: 800;
            color: #2c5f4f;
        }

        .btn {
            display: inline-block;
            padding: 1rem 3rem;
            font-size: 1.2rem;
            font-weight: 700;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            margin: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2c5f4f 0%, #1a4838 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(44, 95, 79, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(44, 95, 79, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #2c5f4f;
            border: 2px solid #2c5f4f;
        }

        .btn-secondary:hover {
            background: #f8f9fa;
        }

        .button-group {
            text-align: center;
            margin-top: 2rem;
        }

        .test-screen {
            display: none;
        }

        .progress-container {
            margin-bottom: 2rem;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2c5f4f 0%, #d4af37 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 1.1rem;
            color: #666;
            font-weight: 600;
        }

        .question-container {
            margin: 3rem 0;
        }

        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 2rem;
            line-height: 1.8;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .option-btn {
            padding: 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            color: #333;
        }

        .option-btn:hover {
            border-color: #d4af37;
            background: #fffef8;
            transform: translateY(-3px);
        }

        .option-btn.selected {
            border-color: #2c5f4f;
            background: linear-gradient(135deg, #f0f8f5 0%, #fffef8 100%);
            box-shadow: 0 4px 15px rgba(44, 95, 79, 0.2);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .result-screen {
            display: none;
        }

        .result-badge {
            display: inline-block;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #2c5f4f 0%, #d4af37 100%);
            color: white;
            font-size: 2.5rem;
            font-weight: 800;
            border-radius: 50px;
            margin-bottom: 1rem;
        }

        .result-title {
            font-size: 2rem;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 1rem;
        }

        .result-description {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.8;
            margin-bottom: 2rem;
        }

        .result-section {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
        }

        .result-section h3 {
            font-size: 1.3rem;
            color: #2c5f4f;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .result-section p {
            font-size: 1rem;
            color: #666;
            line-height: 1.8;
        }

        .result-section ul {
            list-style: none;
            padding: 0;
            margin-top: 1rem;
        }

        .result-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .result-section li:before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #2c5f4f;
            font-weight: bold;
        }

        .crisis-box {
            background: #f8d7da;
            border: 2px solid #dc3545;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            display: none;
        }

        .crisis-box h4 {
            color: #721c24;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .crisis-box p {
            color: #721c24;
            line-height: 1.6;
        }

        .crisis-box a {
            color: #721c24;
            font-weight: 700;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .test-container {
                padding: 1.5rem;
            }

            .test-header h1 {
                font-size: 1.8rem;
            }

            .info-cards {
                grid-template-columns: 1fr;
            }

            .options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <a href="index.html" class="nav-logo">
                    <img src="images/logo-brain-hd.png" alt="Mentora Logo" class="logo-icon">
                    <span class="logo-text">Mentora</span>
                </a>
            </div>
        </nav>
    </header>

    <div class="container">
        <div class="test-container">
            <div class="start-screen" id="startScreen">
                <div class="test-header">
                    <h1><i class="fas fa-heart-broken"></i> 우울증 검사 (PHQ-9)</h1>
                    <p>최근 2주간의 기분과 생활 패턴을 측정하세요</p>
                </div>

                <div class="warning-box">
                    <p><strong>⚠️ 주의사항:</strong> 이 검사는 전문적인 진단을 대체할 수 없습니다. 심각한 증상이 있다면 반드시 정신건강의학과 전문의와 상담하시기 바랍니다.</p>
                </div>

                <div class="info-cards">
                    <div class="info-card">
                        <i class="fas fa-clock"></i>
                        <h3>소요 시간</h3>
                        <p>10분</p>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-question-circle"></i>
                        <h3>질문 수</h3>
                        <p>21개</p>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-chart-bar"></i>
                        <h3>단계</h3>
                        <p>5단계</p>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="startTest()">
                        <i class="fas fa-play"></i> 검사 시작하기
                    </button>
                    <a href="index.html" class="btn btn-secondary">
                        <i class="fas fa-home"></i> 홈으로 돌아가기
                    </a>
                </div>
            </div>

            <div class="test-screen" id="testScreen">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text">
                        <span id="currentQuestion">1</span> / <span id="totalQuestions">21</span>
                    </div>
                </div>

                <div class="question-container">
                    <div class="question-text" id="questionText"></div>
                    <div class="options" id="optionsContainer"></div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn">
                        <i class="fas fa-arrow-left"></i> 이전
                    </button>
                    <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn">
                        다음 <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <div class="result-screen" id="resultScreen">
                <div class="test-header">
                    <span class="result-badge" id="scoreLevel">정상</span>
                    <h2 class="result-title" id="resultTitle"></h2>
                    <p class="result-description" id="resultDescription"></p>
                </div>

                <div class="result-section">
                    <h3><i class="fas fa-info-circle"></i> 증상 설명</h3>
                    <p id="symptoms"></p>
                </div>

                <div class="result-section">
                    <h3><i class="fas fa-lightbulb"></i> 권장 사항</h3>
                    <ul id="recommendations"></ul>
                </div>

                <div class="crisis-box" id="crisisBox">
                    <h4><i class="fas fa-exclamation-triangle"></i> 긴급 도움이 필요하신가요?</h4>
                    <p>
                        • 자살예방 상담전화: <a href="tel:1393">1393</a><br>
                        • 정신건강 위기상담: <a href="tel:1577-0199">1577-0199</a><br>
                        • 24시간 생명의 전화: <a href="tel:1588-9191">1588-9191</a><br>
                        • 청소년 전화: <a href="tel:1388">1388</a>
                    </p>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="saveResult()">
                        <i class="fas fa-save"></i> 결과 저장
                    </button>
                    <button class="btn btn-secondary" onclick="shareResult()">
                        <i class="fas fa-share-alt"></i> 공유하기
                    </button>
                    <a href="index.html" class="btn btn-secondary">
                        <i class="fas fa-home"></i> 홈으로
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            "일이나 여가 활동을 하는 데 흥미나 즐거움을 느끼지 못함",
            "기분이 가라앉거나 우울하거나 희망이 없음",
            "잠들기 어렵거나 자주 깨거나 너무 많이 잠을 잠",
            "피곤하고 기운이 없음",
            "식욕이 줄었거나 과식을 함",
            "자신이 실패자라고 느끼거나 자신이나 가족을 실망시킴",
            "집중하기 어려움 (예: 신문 읽기, TV 시청)",
            "다른 사람들이 알아챌 정도로 말과 행동이 느려지거나 반대로 안절부절 못함",
            "자해하거나 죽는 것이 더 낫다는 생각",
            "일상생활에서의 즐거움 감소",
            "자존감이 낮아짐",
            "미래에 대해 비관적임",
            "결정을 내리기 어려움",
            "사회적 활동을 피함",
            "과거의 실수에 대해 계속 생각함",
            "죄책감을 자주 느낌",
            "일상적인 일을 하는 것이 부담스러움",
            "작은 일에도 쉽게 짜증이 남",
            "눈물이 자주 남",
            "무가치하다고 느낌",
            "삶이 의미 없다고 느낌"
        ];

        const levels = {
            minimal: {
                title: '정상 (최소한의 우울)',
                description: '우울 증상이 거의 없거나 매우 경미한 상태입니다.',
                symptoms: '일시적인 기분 저하가 있을 수 있지만 일상생활에 큰 지장이 없습니다.',
                recommendations: [
                    '현재의 긍정적인 생활 습관을 유지하세요',
                    '규칙적인 운동과 충분한 수면을 계속하세요',
                    '스트레스 관리 방법을 꾸준히 실천하세요',
                    '사회적 관계를 지속적으로 유지하세요'
                ],
                showCrisis: false
            },
            mild: {
                title: '경도 우울',
                description: '가벼운 우울 증상이 있지만 관리 가능한 수준입니다.',
                symptoms: '기분이 다소 저하되어 있고 일부 활동에 대한 흥미가 감소했을 수 있습니다.',
                recommendations: [
                    '규칙적인 운동을 시작하세요 (주 3-4회, 30분 이상)',
                    '충분한 수면을 취하세요 (7-8시간)',
                    '친구나 가족과 정기적으로 만나세요',
                    '취미 활동을 찾아보세요',
                    '명상이나 요가 등 이완 기법을 시도하세요',
                    '증상이 지속되면 전문가 상담을 고려하세요'
                ],
                showCrisis: false
            },
            moderate: {
                title: '중등도 우울',
                description: '중간 정도의 우울 증상이 있으며, 전문가 상담이 권장됩니다.',
                symptoms: '일상생활에 어느 정도 지장이 있고, 기분 저하와 흥미 상실이 뚜렷합니다. 수면과 식욕에도 변화가 있을 수 있습니다.',
                recommendations: [
                    '반드시 정신건강의학과 전문의와 상담하세요',
                    '심리상담(인지행동치료 등)을 받아보세요',
                    '규칙적인 생활 리듬을 유지하세요',
                    '가벼운 운동을 꾸준히 하세요',
                    '술과 카페인 섭취를 줄이세요',
                    '신뢰할 수 있는 사람에게 자신의 상태를 이야기하세요'
                ],
                showCrisis: false
            },
            severe: {
                title: '중증 우울',
                description: '심각한 우울 증상이 있으며, 즉시 전문적인 도움이 필요합니다.',
                symptoms: '일상생활에 심각한 지장이 있고, 극심한 기분 저하, 절망감, 무가치감을 느낍니다. 업무나 학업 수행이 어려울 수 있습니다.',
                recommendations: [
                    '즉시 정신건강의학과를 방문하세요',
                    '약물치료와 심리치료를 병행하세요',
                    '혼자 있지 말고 가족이나 친구와 함께 지내세요',
                    '위기상담 전화를 이용하세요',
                    '자해 충동이 있다면 즉시 응급실로 가세요',
                    '정기적으로 의사의 진료를 받으세요'
                ],
                showCrisis: true
            },
            verySevere: {
                title: '최중증 우울',
                description: '매우 심각한 우울 증상으로 즉각적인 의료 개입이 필요합니다.',
                symptoms: '극심한 우울감과 절망감, 자살 사고가 있을 수 있습니다. 기본적인 일상생활 수행도 매우 어려운 상태입니다.',
                recommendations: [
                    '즉시 정신건강의학과 응급실을 방문하세요',
                    '자살 충동이 있다면 119에 전화하거나 가까운 응급실로 가세요',
                    '절대 혼자 있지 마세요',
                    '자살예방 상담전화(1393)에 즉시 연락하세요',
                    '입원 치료가 필요할 수 있습니다',
                    '약물치료를 반드시 받으세요'
                ],
                showCrisis: true
            }
        };

        let currentQ = 0;
        let answers = [];
        let totalScore = 0;

        function startTest() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('testScreen').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            document.getElementById('currentQuestion').textContent = currentQ + 1;
            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('questionText').textContent = '최근 2주 동안: ' + questions[currentQ];

            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            const options = ['전혀 없음', '며칠 동안', '7일 이상', '거의 매일'];

            options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = option;
                btn.onclick = () => selectAnswer(index);
                if (answers[currentQ] === index) {
                    btn.classList.add('selected');
                }
                optionsContainer.appendChild(btn);
            });

            const progress = ((currentQ + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            document.getElementById('prevBtn').style.display = currentQ === 0 ? 'none' : 'inline-block';
        }

        function selectAnswer(value) {
            answers[currentQ] = value;
            const btns = document.querySelectorAll('.option-btn');
            btns.forEach((btn, index) => {
                btn.classList.toggle('selected', index === value);
            });
        }

        function nextQuestion() {
            if (answers[currentQ] === undefined) {
                alert('답변을 선택해주세요!');
                return;
            }

            totalScore += answers[currentQ];

            if (currentQ < questions.length - 1) {
                currentQ++;
                showQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQ > 0) {
                currentQ--;
                showQuestion();
            }
        }

        function showResult() {
            document.getElementById('testScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';

            // 점수에 따른 수준 결정 (0-63점)
            let level;
            if (totalScore <= 9) level = 'minimal';
            else if (totalScore <= 16) level = 'mild';
            else if (totalScore <= 31) level = 'moderate';
            else if (totalScore <= 47) level = 'severe';
            else level = 'verySevere';

            const resultData = levels[level];

            document.getElementById('scoreLevel').textContent = level === 'minimal' ? '정상' : resultData.title;
            document.getElementById('resultTitle').textContent = resultData.title;
            document.getElementById('resultDescription').textContent = resultData.description;
            document.getElementById('symptoms').textContent = resultData.symptoms;

            const recList = document.getElementById('recommendations');
            recList.innerHTML = '';
            resultData.recommendations.forEach(rec => {
                const li = document.createElement('li');
                li.textContent = rec;
                recList.appendChild(li);
            });

            if (resultData.showCrisis) {
                document.getElementById('crisisBox').style.display = 'block';
            }
        }

        function saveResult() {
            alert('결과 저장 기능은 프리미엄 회원에게 제공됩니다.');
        }

        function shareResult() {
            alert('결과 공유 기능은 프리미엄 회원에게 제공됩니다.');
        }
    </script>
</body>
</html>
